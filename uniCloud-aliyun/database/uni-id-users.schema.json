{
    "bsonType": "object",
    "required": [],
    "permission": {
        "read": "id == auth.uid",
        "create": false,
        "update": "id == auth.uid",
        "delete": false
    },
    "properties": {
        "_id": {
            "description": "ID，系统自动生成"
        },
        "username": {
            "bsonType": "string",
            "description": "用户名",
            "title": "用户名"
        },
        "nickname": {
            "bsonType": "string",
            "description": "昵称",
            "title": "昵称",
            "trim": "both"
        },
        "health_goal": {
            "bsonType": "array",
            "description": "健康目标，如：low_purine (低嘌呤), low_sugar (控糖)",
            "title": "健康目标",
            "items": {
                "bsonType": "string",
                "enum": [
                    "low_purine",
                    "low_sugar",
                    "weight_loss",
                    "muscle_gain"
                ]
            }
        },
        "allergies": {
            "bsonType": "array",
            "description": "过敏源",
            "title": "过敏源",
            "items": {
                "bsonType": "string"
            }
        },
        "register_date": {
            "bsonType": "timestamp",
            "description": "注册时间",
            "forceDefaultValue": {
                "$env": "now"
            }
        }
    }
}